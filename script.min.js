function addCalc(e,t){if(1==t)if(localStorage.probs){var o=JSON.parse(localStorage.probs)
o.push(e),localStorage.probs=JSON.stringify(o)}else localStorage.probs=JSON.stringify([e])
var n=math.eval(e)
n%1!==0&&(n=math.format(n,{notation:"fixed",precision:3}))
var a=document.createElement("div")
a.className="eqwrap"
var l=document.createElement("div")
l.className="eq",l.innerHTML=parser(e),a.appendChild(l)
var r=document.createElement("div")
r.className="result",r.addEventListener("click",resultClick)
var c=document.createElement("span"),d=document.createTextNode(n)
c.appendChild(d),r.appendChild(c),a.appendChild(r),document.getElementById("calculator").appendChild(a),document.getElementById("textbox").value="",document.getElementById("textbox").focus()}function resultClick(e){document.getElementById("textbox").value+=this.innerText,document.getElementById("textbox").focus(),localStorage.current=document.getElementById("textbox").value}function parser(e){return e=e.replace(/[=()+\-*\/.]/g,'<span class="op">$&</span>').replace(/[0-9]/g,'<span class="num">$&</span>')}!function(){if("undefined"==typeof localStorage.probs&&(localStorage.probs=JSON.stringify(["1 + 2","2.2 inches to meter","2.2 in to m","sin (45)"])),""!=localStorage.probs)for(var e=JSON.parse(localStorage.probs),t=0;t<e.length;t++)addCalc(e[t],!1)
localStorage.current&&(document.getElementById("textbox").value=localStorage.current),document.getElementById("textbox").focus()}(),document.getElementById("textbox").addEventListener("keydown",function(e){if(13==e.keyCode)return e.preventDefault(),document.getElementById("textbox").value&&addCalc(document.getElementById("textbox").value,!0),!1
if(8==e.keyCode&&""==document.getElementById("textbox").value){var t=JSON.parse(localStorage.probs)
t.length>0&&(t.pop(),localStorage.probs=JSON.stringify(t),document.getElementById("calculator").removeChild(document.getElementById("calculator").lastChild))}}),document.getElementById("textbox").addEventListener("keyup",function(e){setTimeout(function(){localStorage.current=document.getElementById("textbox").value},10)})
